OBJECT Page 5483 Employee Entity
{
  OBJECT-PROPERTIES
  {
    Date=09/19/18;
    Time=12:00:00 PM;
    Version List=NAVW113.00;
  }
  PROPERTIES
  {
    CaptionML=[@@@={Locked};
               ENU=employees;
               ESM=employees;
               FRC=employees;
               ENC=employees];
    SourceTable=Table5200;
    DelayedInsert=Yes;
    PageType=API;
    EntitySetName=employees;
    EntityName=employee;
    OnOpenPage=VAR
                 GraphMgtEmployee@1000 : Codeunit 5483;
               BEGIN
                 GraphMgtEmployee.UpdateIntegrationRecords(TRUE);
               END;

    OnAfterGetRecord=BEGIN
                       SetCalculatedFields;
                     END;

    OnNewRecord=BEGIN
                  ClearCalculatedFields;
                END;

    OnInsertRecord=VAR
                     GraphMgtGeneralTools@1002 : Codeunit 5465;
                     GraphMgtEmployee@1000 : Codeunit 5483;
                     RecRef@1003 : RecordRef;
                   BEGIN
                     INSERT(TRUE);

                     GraphMgtEmployee.ProcessComplexTypes(Rec,PostalAddressJSON);

                     RecRef.GETTABLE(Rec);
                     GraphMgtGeneralTools.ProcessNewRecordFromAPI(RecRef,TempFieldSet,CURRENTDATETIME);
                     RecRef.SETTABLE(Rec);

                     MODIFY(TRUE);
                     SetCalculatedFields;
                     EXIT(FALSE);
                   END;

    OnModifyRecord=VAR
                     Employee@1000 : Record 5200;
                     GraphMgtEmployee@1001 : Codeunit 5483;
                     GraphMgtGeneralTools@1002 : Codeunit 5465;
                   BEGIN
                     IF xRec.Id <> Id THEN
                       GraphMgtGeneralTools.ErrorIdImmutable;
                     Employee.SETRANGE(Id,Id);
                     Employee.FINDFIRST;

                     GraphMgtEmployee.ProcessComplexTypes(Rec,PostalAddressJSON);

                     IF "No." = Employee."No." THEN
                       MODIFY(TRUE)
                     ELSE BEGIN
                       Employee.TRANSFERFIELDS(Rec,FALSE);
                       Employee.RENAME("No.");
                       TRANSFERFIELDS(Employee);
                     END;

                     SetCalculatedFields;
                   END;

    ODataKeyFields=Id;
  }
  CONTROLS
  {
    { 1   ;0   ;Container ;
                ContainerType=ContentArea }

    { 2   ;1   ;Group     ;
                Name=Group;
                GroupType=Repeater }

    { 3   ;2   ;Field     ;
                Name=id;
                CaptionML=[@@@={Locked};
                           ENU=Id;
                           ESM=Id;
                           FRC=Id;
                           ENC=Id];
                ApplicationArea=#All;
                SourceExpr=Id;
                Editable=FALSE }

    { 4   ;2   ;Field     ;
                Name=number;
                CaptionML=[@@@={Locked};
                           ENU=Number;
                           ESM=Number;
                           FRC=Number;
                           ENC=Number];
                ApplicationArea=#All;
                SourceExpr="No." }

    { 19  ;2   ;Field     ;
                Name=displayName;
                CaptionML=[@@@={Locked};
                           ENU=DisplayName;
                           ESM=DisplayName;
                           FRC=DisplayName;
                           ENC=DisplayName];
                ApplicationArea=#All;
                SourceExpr=DisplayName;
                Editable=FALSE }

    { 5   ;2   ;Field     ;
                Name=givenName;
                CaptionML=[@@@={Locked};
                           ENU=GivenName;
                           ESM=GivenName;
                           FRC=GivenName;
                           ENC=GivenName];
                ApplicationArea=#All;
                SourceExpr="First Name";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("First Name"));
                           END;
                            }

    { 6   ;2   ;Field     ;
                Name=middleName;
                CaptionML=[@@@={Locked};
                           ENU=MiddleName;
                           ESM=MiddleName;
                           FRC=MiddleName;
                           ENC=MiddleName];
                ApplicationArea=#All;
                SourceExpr="Middle Name";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("Middle Name"));
                           END;
                            }

    { 7   ;2   ;Field     ;
                Name=surname;
                CaptionML=[@@@={Locked};
                           ENU=Surname;
                           ESM=Surname;
                           FRC=Surname;
                           ENC=Surname];
                ApplicationArea=#All;
                SourceExpr="Last Name";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("Last Name"));
                           END;
                            }

    { 8   ;2   ;Field     ;
                Name=jobTitle;
                CaptionML=[@@@={Locked};
                           ENU=JobTitle;
                           ESM=JobTitle;
                           FRC=JobTitle;
                           ENC=JobTitle];
                ApplicationArea=#All;
                SourceExpr="Job Title";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("Job Title"));
                           END;
                            }

    { 18  ;2   ;Field     ;
                Name=address;
                CaptionML=[@@@={Locked};
                           ENU=Address;
                           ESM=Address;
                           FRC=Address;
                           ENC=Address];
                ToolTipML=[ENU=Specifies the address for the employee.;
                           ESM=Especifica la direcci¢n del empleado.;
                           FRC=Sp‚cifie l'adresse de l'employ‚.;
                           ENC=Specifies the address for the employee.];
                ApplicationArea=#All;
                SourceExpr=PostalAddressJSON;
                ODataEDMType=POSTALADDRESS }

    { 9   ;2   ;Field     ;
                Name=phoneNumber;
                CaptionML=[@@@={Locked};
                           ENU=PhoneNumber;
                           ESM=PhoneNumber;
                           FRC=PhoneNumber;
                           ENC=PhoneNumber];
                ApplicationArea=#All;
                SourceExpr="Phone No.";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("Phone No."));
                           END;
                            }

    { 10  ;2   ;Field     ;
                Name=mobilePhone;
                CaptionML=[@@@={Locked};
                           ENU=MobilePhone;
                           ESM=MobilePhone;
                           FRC=MobilePhone;
                           ENC=MobilePhone];
                ApplicationArea=#All;
                SourceExpr="Mobile Phone No.";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("Mobile Phone No."));
                           END;
                            }

    { 11  ;2   ;Field     ;
                Name=email;
                CaptionML=[@@@={Locked};
                           ENU=Email;
                           ESM=Email;
                           FRC=Email;
                           ENC=Email];
                ApplicationArea=#All;
                SourceExpr="Company E-Mail";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("Company E-Mail"));
                           END;
                            }

    { 12  ;2   ;Field     ;
                Name=personalEmail;
                CaptionML=[@@@={Locked};
                           ENU=PersonalEmail;
                           ESM=PersonalEmail;
                           FRC=PersonalEmail;
                           ENC=PersonalEmail];
                ApplicationArea=#All;
                SourceExpr="E-Mail";
                OnValidate=BEGIN
                             RegisterFieldSet(FIELDNO("E-Mail"));
                           END;
                            }

    { 13  ;2   ;Field     ;
                Name=employmentDate;
                CaptionML=[@@@={Locked};
                           ENU=EmploymentDate;
                           ESM=EmploymentDate;
                           FRC=EmploymentDate;
                           ENC=EmploymentDate];
                ApplicationArea=#All;
                SourceExpr="Employment Date" }

    { 14  ;2   ;Field     ;
                Name=terminationDate;
                CaptionML=[@@@={Locked};
                           ENU=TerminationDate;
                           ESM=TerminationDate;
                           FRC=TerminationDate;
                           ENC=TerminationDate];
                ApplicationArea=#All;
                SourceExpr="Termination Date" }

    { 20  ;2   ;Field     ;
                Name=status;
                CaptionML=[@@@={Locked};
                           ENU=Status;
                           ESM=Status;
                           FRC=Status;
                           ENC=Status];
                ApplicationArea=#All;
                SourceExpr=Status }

    { 15  ;2   ;Field     ;
                Name=birthDate;
                CaptionML=[@@@={Locked};
                           ENU=BirthDate;
                           ESM=BirthDate;
                           FRC=BirthDate;
                           ENC=BirthDate];
                ApplicationArea=#All;
                SourceExpr="Birth Date" }

    { 17  ;2   ;Field     ;
                Name=lastModifiedDateTime;
                CaptionML=[@@@={Locked};
                           ENU=LastModifiedDateTime;
                           ESM=LastModifiedDateTime;
                           FRC=LastModifiedDateTime;
                           ENC=LastModifiedDateTime];
                ApplicationArea=#All;
                SourceExpr="Last Modified Date Time" }

    { 16  ;2   ;Part      ;
                Name=picture;
                CaptionML=[ENU=picture;
                           ESM=fotograf¡a;
                           FRC=image;
                           ENC=picture];
                SubPageLink=Id=FIELD(Id);
                PagePartID=Page5468;
                EntitySetName=picture;
                EntityName=picture;
                PartType=Page }

    { 21  ;2   ;Part      ;
                Name=defaultDimensions;
                CaptionML=[@@@={Locked};
                           ENU=Default Dimensions;
                           ESM=Default Dimensions;
                           FRC=Default Dimensions;
                           ENC=Default Dimensions];
                SubPageLink=ParentId=FIELD(Id);
                PagePartID=Page5509;
                EntitySetName=defaultDimensions;
                EntityName=defaultDimensions;
                PartType=Page }

  }
  CODE
  {
    VAR
      TempFieldSet@1001 : TEMPORARY Record 2000000041;
      PostalAddressJSON@1000 : Text;
      DisplayName@1002 : Text;

    LOCAL PROCEDURE SetCalculatedFields@6();
    VAR
      GraphMgtEmployee@1000 : Codeunit 5483;
    BEGIN
      PostalAddressJSON := GraphMgtEmployee.PostalAddressToJSON(Rec);
      DisplayName := STRSUBSTNO('%1 %2',"First Name","Last Name");
    END;

    LOCAL PROCEDURE ClearCalculatedFields@10();
    BEGIN
      CLEAR(Id);
      CLEAR(PostalAddressJSON);
      TempFieldSet.DELETEALL;
    END;

    LOCAL PROCEDURE RegisterFieldSet@11(FieldNo@1000 : Integer);
    BEGIN
      IF TempFieldSet.GET(DATABASE::Employee,FieldNo) THEN
        EXIT;

      TempFieldSet.INIT;
      TempFieldSet.TableNo := DATABASE::Employee;
      TempFieldSet.VALIDATE("No.",FieldNo);
      TempFieldSet.INSERT(TRUE);
    END;

    BEGIN
    END.
  }
}

