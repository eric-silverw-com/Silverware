OBJECT Page 5805 Item Charge Assignment (Purch)
{
  OBJECT-PROPERTIES
  {
    Date=09/19/18;
    Time=12:00:00 PM;
    Version List=NAVW113.00;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Item Charge Assignment (Purch);
               ESM=Asigna cargo prod. (compra);
               FRC=Affect. frais annexes (achat);
               ENC=Item Charge Assignment (Purch)];
    InsertAllowed=No;
    SourceTable=Table5805;
    DataCaptionExpr=DataCaption;
    DelayedInsert=Yes;
    PopulateAllFields=Yes;
    PageType=Worksheet;
    AutoSplitKey=Yes;
    RefreshOnActivate=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Item Charge;
                                ESM=Nuevo,Procesar,Informe,Cargo de producto;
                                FRC=Nouveau,Traiter,Rapport,Article,Frais;
                                ENC=New,Process,Report,Item Charge];
    OnOpenPage=BEGIN
                 FILTERGROUP(2);
                 SETRANGE("Document Type",PurchLine2."Document Type");
                 SETRANGE("Document No.",PurchLine2."Document No.");
                 SETRANGE("Document Line No.",PurchLine2."Line No.");
                 SETRANGE("Item Charge No.",PurchLine2."No.");
                 FILTERGROUP(0);
               END;

    OnAfterGetRecord=BEGIN
                       UpdateQty;
                     END;

    OnDeleteRecord=BEGIN
                     IF "Document Type" = "Applies-to Doc. Type" THEN BEGIN
                       PurchLine2.TESTFIELD("Receipt No.",'');
                       PurchLine2.TESTFIELD("Return Shipment No.",'');
                     END;
                   END;

    OnQueryClosePage=BEGIN
                       IF RemAmountToAssign <> 0 THEN
                         IF NOT CONFIRM(Text001,FALSE,RemAmountToAssign,"Document Type","Document No.") THEN
                           EXIT(FALSE);
                     END;

    OnAfterGetCurrRecord=BEGIN
                           UpdateQtyAssgnt;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 2       ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESM=Acci&ones;
                                 FRC=F&onctions;
                                 ENC=F&unctions];
                      Image=Action }
      { 20      ;2   ;Action    ;
                      Name=GetReceiptLines;
                      AccessByPermission=TableData 120=R;
                      CaptionML=[ENU=Get &Receipt Lines;
                                 ESM=Tomar l¡ns. &recep.;
                                 FRC=&Extraire lignes r‚ception;
                                 ENC=Get &Receipt Lines];
                      ToolTipML=[ENU=Select a posted purchase receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original purchase receipt.;
                                 ESM="Permite seleccionar una recepci¢n de compra registrada para el producto al que desea asignar el cargo de producto; por ejemplo, si ha recibido una factura para el cargo del producto despu‚s de registrar la recepci¢n de compra original.";
                                 FRC=S‚lectionnez une r‚ception achat report‚e pour l'article auquel vous souhaitez affecter les frais annexes, par exemple, si vous avez re‡u une facture pour les frais annexes une fois que vous avez report‚ la r‚ception achat d'origine.;
                                 ENC=Select a posted purchase receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original purchase receipt.];
                      ApplicationArea=#ItemCharges;
                      Promoted=Yes;
                      Image=Receipt;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ItemChargeAssgntPurch@1001 : Record 5805;
                                 ReceiptLines@1002 : Page 5806;
                               BEGIN
                                 PurchLine2.TESTFIELD("Qty. to Invoice");

                                 ItemChargeAssgntPurch.SETRANGE("Document Type","Document Type");
                                 ItemChargeAssgntPurch.SETRANGE("Document No.","Document No.");
                                 ItemChargeAssgntPurch.SETRANGE("Document Line No.","Document Line No.");

                                 ReceiptLines.SETTABLEVIEW(PurchRcptLine);
                                 IF ItemChargeAssgntPurch.FINDLAST THEN
                                   ReceiptLines.Initialize(ItemChargeAssgntPurch,PurchLine2."Unit Cost")
                                 ELSE
                                   ReceiptLines.Initialize(Rec,PurchLine2."Unit Cost");

                                 ReceiptLines.LOOKUPMODE(TRUE);
                                 ReceiptLines.RUNMODAL;
                               END;
                                }
      { 42      ;2   ;Action    ;
                      Name=GetTransferReceiptLines;
                      AccessByPermission=TableData 5740=R;
                      CaptionML=[ENU=Get &Transfer Receipt Lines;
                                 ESM=Tomar l¡neas de recepciones de trans&ferencias;
                                 FRC=Extraire lignes &r‚ception transfert;
                                 ENC=Get &Transfer Receipt Lines];
                      ToolTipML=[ENU=Select a posted transfer receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original transfer receipt.;
                                 ESM="Permite seleccionar una recepci¢n de transferencia registrada para el producto al que desea asignar el cargo de producto; por ejemplo, si ha recibido una factura para el cargo del producto despu‚s de registrar la recepci¢n de transferencia original.";
                                 FRC=S‚lectionnez une r‚ception transfert report‚e pour l'article auquel vous souhaitez affecter les frais annexes, par exemple, si vous avez re‡u une facture pour les frais annexes une fois que vous avez report‚ la r‚ception transfert d'origine.;
                                 ENC=Select a posted transfer receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original transfer receipt.];
                      ApplicationArea=#Location;
                      Image=TransferReceipt;
                      OnAction=VAR
                                 ItemChargeAssgntPurch@1001 : Record 5805;
                                 PostedTransferReceiptLines@1002 : Page 5759;
                               BEGIN
                                 ItemChargeAssgntPurch.SETRANGE("Document Type","Document Type");
                                 ItemChargeAssgntPurch.SETRANGE("Document No.","Document No.");
                                 ItemChargeAssgntPurch.SETRANGE("Document Line No.","Document Line No.");

                                 PostedTransferReceiptLines.SETTABLEVIEW(TransferRcptLine);
                                 IF ItemChargeAssgntPurch.FINDLAST THEN
                                   PostedTransferReceiptLines.Initialize(ItemChargeAssgntPurch,PurchLine2."Unit Cost")
                                 ELSE
                                   PostedTransferReceiptLines.Initialize(Rec,PurchLine2."Unit Cost");

                                 PostedTransferReceiptLines.LOOKUPMODE(TRUE);
                                 PostedTransferReceiptLines.RUNMODAL;
                               END;
                                }
      { 5       ;2   ;Action    ;
                      Name=GetReturnShipmentLines;
                      AccessByPermission=TableData 6650=R;
                      CaptionML=[ENU=Get Return &Shipment Lines;
                                 ESM=Tomar l¡neas de &env¡o y devoluci¢n;
                                 FRC=Ext&raire lignes livraison retour;
                                 ENC=Get Return &Shipment Lines];
                      ToolTipML=[ENU=Select a posted return shipment for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original return shipment.;
                                 ESM="Permite seleccionar un env¡o de devoluci¢n registrado para el producto al que desea asignar el cargo de producto; por ejemplo, si ha recibido una factura para el cargo del producto despu‚s de registrar el env¡o de devoluci¢n original.";
                                 FRC=S‚lectionnez une livraison retour report‚e pour l'article auquel vous souhaitez affecter les frais annexes, par exemple, si vous avez re‡u une facture pour les frais annexes une fois que vous avez report‚ la livraison retour d'origine.;
                                 ENC=Select a posted return shipment for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original return shipment.];
                      ApplicationArea=#SalesReturnOrder;
                      Image=ReturnShipment;
                      OnAction=VAR
                                 ItemChargeAssgntPurch@1001 : Record 5805;
                                 ShipmentLines@1002 : Page 6657;
                               BEGIN
                                 ItemChargeAssgntPurch.SETRANGE("Document Type","Document Type");
                                 ItemChargeAssgntPurch.SETRANGE("Document No.","Document No.");
                                 ItemChargeAssgntPurch.SETRANGE("Document Line No.","Document Line No.");

                                 ShipmentLines.SETTABLEVIEW(ReturnShptLine);
                                 IF ItemChargeAssgntPurch.FINDLAST THEN
                                   ShipmentLines.Initialize(ItemChargeAssgntPurch,PurchLine2."Unit Cost")
                                 ELSE
                                   ShipmentLines.Initialize(Rec,PurchLine2."Unit Cost");

                                 ShipmentLines.LOOKUPMODE(TRUE);
                                 ShipmentLines.RUNMODAL;
                               END;
                                }
      { 43      ;2   ;Action    ;
                      Name=GetSalesShipmentLines;
                      AccessByPermission=TableData 110=R;
                      CaptionML=[ENU=Get S&ales Shipment Lines;
                                 ESM=&Tomar l¡neas de env¡o de ventas;
                                 FRC=Ex&traire lignes livr. vente;
                                 ENC=Get S&ales Shipment Lines];
                      ToolTipML=[ENU=Select a posted sales shipment for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original sales shipment.;
                                 ESM="Permite seleccionar una remisi¢n de ventas registrada para el producto al que desea asignar el cargo de producto; por ejemplo, si ha recibido una factura para el cargo del producto despu‚s de registrar la remisi¢n de ventas original.";
                                 FRC=S‚lectionnez une livraison vente report‚e pour l'article auquel vous souhaitez affecter les frais annexes, par exemple, si vous avez re‡u une facture pour les frais annexes une fois que vous avez report‚ la livraison vente d'origine.;
                                 ENC=Select a posted sales shipment for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original sales shipment.];
                      ApplicationArea=#Basic,#Suite;
                      Image=SalesShipment;
                      OnAction=VAR
                                 ItemChargeAssgntPurch@1001 : Record 5805;
                                 SalesShipmentLines@1000 : Page 5824;
                               BEGIN
                                 ItemChargeAssgntPurch.SETRANGE("Document Type","Document Type");
                                 ItemChargeAssgntPurch.SETRANGE("Document No.","Document No.");
                                 ItemChargeAssgntPurch.SETRANGE("Document Line No.","Document Line No.");

                                 SalesShipmentLines.SETTABLEVIEW(SalesShptLine);
                                 IF ItemChargeAssgntPurch.FINDLAST THEN
                                   SalesShipmentLines.InitializePurchase(ItemChargeAssgntPurch,PurchLine2."Unit Cost")
                                 ELSE
                                   SalesShipmentLines.InitializePurchase(Rec,PurchLine2."Unit Cost");

                                 SalesShipmentLines.LOOKUPMODE(TRUE);
                                 SalesShipmentLines.RUNMODAL;
                               END;
                                }
      { 44      ;2   ;Action    ;
                      Name=GetReturnReceiptLines;
                      AccessByPermission=TableData 6660=R;
                      CaptionML=[ENU=Get Ret&urn Receipt Lines;
                                 ESM=Tomar l¡ns. recep. de&voluc.;
                                 FRC=Extr&aire lignes r‚cept. retour;
                                 ENC=Get Ret&urn Receipt Lines];
                      ToolTipML=[ENU=Select a posted return receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original return receipt.;
                                 ESM="Seleccione una recepci¢n de devoluci¢n registrada para el producto al que desea asignar el cargo de producto; por ejemplo, si ha recibido una factura para el cargo del producto despu‚s de registrar la recepci¢n de devoluci¢n original.";
                                 FRC=S‚lectionnez une r‚ception retour report‚e pour l'article auquel vous souhaitez affecter les frais annexes, par exemple, si vous avez re‡u une facture pour les frais annexes une fois que vous avez report‚ la r‚ception retour d'origine.;
                                 ENC=Select a posted return receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original return receipt.];
                      ApplicationArea=#PurchReturnOrder;
                      Image=ReturnReceipt;
                      OnAction=VAR
                                 ItemChargeAssgntPurch@1000 : Record 5805;
                                 ReturnRcptLines@1001 : Page 6667;
                               BEGIN
                                 ItemChargeAssgntPurch.SETRANGE("Document Type","Document Type");
                                 ItemChargeAssgntPurch.SETRANGE("Document No.","Document No.");
                                 ItemChargeAssgntPurch.SETRANGE("Document Line No.","Document Line No.");

                                 ReturnRcptLines.SETTABLEVIEW(ReturnRcptLine);
                                 IF ItemChargeAssgntPurch.FINDLAST THEN
                                   ReturnRcptLines.InitializePurchase(ItemChargeAssgntPurch,PurchLine2."Unit Cost")
                                 ELSE
                                   ReturnRcptLines.InitializePurchase(Rec,PurchLine2."Unit Cost");

                                 ReturnRcptLines.LOOKUPMODE(TRUE);
                                 ReturnRcptLines.RUNMODAL;
                               END;
                                }
      { 41      ;2   ;Action    ;
                      Name=SuggestItemChargeAssignment;
                      AccessByPermission=TableData 5800=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Suggest &Item Charge Assignment;
                                 ESM=Sugerir asignaci¢n &cargo prod.;
                                 FRC=&Sugg‚rer affectation frais annexes;
                                 ENC=Suggest &Item Charge Assignment];
                      ToolTipML=[ENU="Use a function that assigns and distributes the item charge when the document has more than one line of type Item. You can select between four distribution methods. ";
                                 ESM="Utiliza una funci¢n que asigna y distribuye el cargo de producto cuando el documento tiene m s de una l¡nea de tipo producto. Puede seleccionar entre cuatro m‚todos de distribuci¢n. ";
                                 FRC="Utiliser une fonction qui attribue et distribue les frais annexes lorsque le document a plus d'une ligne de type article. Vous pouvez choisir entre quatre m‚thodes de distribution. ";
                                 ENC="Use a function that assigns and distributes the item charge when the document has more than one line of type Item. You can select between four distribution methods. "];
                      ApplicationArea=#ItemCharges;
                      Promoted=Yes;
                      Image=Suggest;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 AssignItemChargePurch@1001 : Codeunit 5805;
                               BEGIN
                                 AssignItemChargePurch.SuggestAssgnt(PurchLine2,AssignableQty,AssgntAmount);
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of the document that this document or journal line will be applied to when you post, for example to register payment.;
                           ESM=Especifica el tipo del documento en el que se liquidar  esta l¡nea de diario o documento al registrar, por ejemplo, pagos.;
                           FRC=Sp‚cifie le type du document auquel cette ligne journal ou document sera affect‚e lors du report, par exemple pour enregistrer un paiement.;
                           ENC=Specifies the type of the document that this document or journal line will be applied to when you post, for example to register payment.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Applies-to Doc. Type";
                Editable=FALSE }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the document that this document or journal line will be applied to when you post, for example to register payment.;
                           ESM=Especifica el n£mero del documento en el que se liquidar  esta l¡nea de diario o documento al registrar, por ejemplo, pagos.;
                           FRC=Sp‚cifie le num‚ro du document auquel cette ligne journal ou document sera affect‚e lors du report, par exemple pour enregistrer un paiement.;
                           ENC=Specifies the number of the document that this document or journal line will be applied to when you post, for example to register payment.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Applies-to Doc. No.";
                Editable=FALSE }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the line on the document that this document or journal line will be applied to when you post, for example to register payment.;
                           ESM=Especifica el n£mero de la l¡nea del documento en la que se liquidar  esta l¡nea de diario o documento al registrar, por ejemplo, pagos.;
                           FRC=Sp‚cifie le num‚ro de la ligne sur le document auquel cette ligne journal ou document sera affect‚e lors du report, par exemple pour enregistrer un paiement.;
                           ENC=Specifies the number of the line on the document that this document or journal line will be applied to when you post, for example to register payment.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Applies-to Doc. Line No.";
                Editable=FALSE }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the item number on the document line that this item charge is assigned to.;
                           ESM=Especifica el n£mero de producto de la l¡nea de documentos a la que est  asignado este cargo de producto.;
                           FRC=Sp‚cifie le num‚ro de l'article de la ligne document auquel les frais annexes sont affect‚s.;
                           ENC=Specifies the item number on the document line that this item charge is assigned to.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Item No.";
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the item on the document line that this item charge is assigned to.;
                           ESM=Especifica una descripci¢n del producto en la l¡nea de documentos a la que est  asignado este cargo de producto.;
                           FRC=Sp‚cifie la description de l'article de la ligne document auquel les frais annexes sont affect‚s.;
                           ENC=Specifies a description of the item on the document line that this item charge is assigned to.];
                ApplicationArea=#ItemCharges;
                SourceExpr=Description }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item charge will be assigned to the document line. If the document has more than one line of type Item, then this quantity reflects the distribution that you selected when you chose the Suggest Item Charge Assignment action.;
                           ESM=Especifica el n£mero de unidades del cargo de producto que se asignar n a la l¡nea del documento. Si el documento tiene m s de una l¡nea del tipo Producto, esta cantidad se corresponder  con la distribuci¢n seleccionada al elegir la acci¢n Sugerir asignaci¢n cargo prod.;
                           FRC=Sp‚cifie le nombre d'unit‚s de frais annexes qui seront affect‚s … la ligne. Si le document a plus d'une ligne de type Article, cette quantit‚ reflŠte alors la distribution que vous avez s‚lectionn‚e lorsque vous avez choisi l'action Sugg‚rer affectation frais annexes.;
                           ENC=Specifies how many units of the item charge will be assigned to the document line. If the document has more than one line of type Item, then this quantity reflects the distribution that you selected when you chose the Suggest Item Charge Assignment action.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. to Assign";
                OnValidate=BEGIN
                             IF PurchLine2.Quantity * "Qty. to Assign" < 0 THEN
                               ERROR(Text000,
                                 FIELDCAPTION("Qty. to Assign"),PurchLine2.FIELDCAPTION(Quantity));
                             QtytoAssignOnAfterValidate;
                           END;
                            }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of units of the item charge will be the assigned to the document line.;
                           ESM=Especifica el n£mero de unidades del cargo de producto que se asignar n a la l¡nea de documento.;
                           FRC=Sp‚cifie le nombre d'unit‚s des frais annexes qui seront affect‚s … la ligne document.;
                           ENC=Specifies the number of units of the item charge will be the assigned to the document line.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. Assigned" }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the value of the item charge that will be the assigned to the document line.;
                           ESM=Especifica el valor del cargo de producto que se asignar  a la l¡nea de documento.;
                           FRC=Sp‚cifie la valeur des frais annexes qui sera affect‚e … la ligne document.;
                           ENC=Specifies the value of the item charge that will be the assigned to the document line.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Amount to Assign";
                Editable=FALSE }

    { 7   ;2   ;Field     ;
                Name=<Gross Weight>;
                CaptionML=[ENU=Gross Weight;
                           ESM=Peso bruto;
                           FRC=Poids brut;
                           ENC=Gross Weight];
                ToolTipML=[ENU=Specifies the initial weight of one unit of the item. The value may be used to complete customs documents and waybills.;
                           ESM=Especifica el peso inicial de una unidad del producto. El valor se puede emplear para rellenar los documentos de aduana y las gu¡as de carga.;
                           FRC=Sp‚cifie le poids initial d'une unit‚ de l'article. Cette valeur peut ˆtre utilis‚e pour remplir des documents douaniers et routiers.;
                           ENC=Specifies the initial weight of one unit of the item. The value may be used to complete customs documents and waybills.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:4;
                BlankZero=Yes;
                SourceExpr=GrossWeight;
                Editable=FALSE }

    { 4   ;2   ;Field     ;
                Name=<Unit Volume>;
                CaptionML=[ENU=Unit Volume;
                           ESM=Volumen;
                           FRC=Volume unitaire;
                           ENC=Unit Volume];
                ToolTipML=[ENU=Specifies the volume of one unit of the item. The value may be used to complete customs documents and waybills.;
                           ESM=Especifica el volumen de una unidad del producto. El valor se puede emplear para rellenar los documentos de aduana y las gu¡as de carga.;
                           FRC=Sp‚cifie le volume d'une unit‚ de l'article. Cette valeur peut ˆtre utilis‚e pour remplir des documents douaniers et routiers.;
                           ENC=Specifies the volume of one unit of the item. The value may be used to complete customs documents and waybills.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:4;
                BlankZero=Yes;
                SourceExpr=UnitVolume;
                Editable=FALSE }

    { 33  ;2   ;Field     ;
                CaptionML=[ENU=Qty. to Receive (Base);
                           ESM=Cdad. a recibir (base);
                           FRC=Quantit‚ … recevoir (base);
                           ENC=Qty. to Receive (Base)];
                ToolTipML=[ENU=Specifies how many units of the item on the documents line for this item charge assignment have not yet been posted as received.;
                           ESM=Especifica el n£mero de unidades del producto en la l¡nea de documentos de esta asignaci¢n de cargo de producto que todav¡a no se han registrado como recibidas.;
                           FRC=Sp‚cifie le nombre d'unit‚s de l'article sur la ligne des documents pour cette affectation de frais annexes qui n'ont pas encore ‚t‚ report‚es comme re‡ues.;
                           ENC=Specifies how many units of the item on the documents line for this item charge assignment have not yet been posted as received.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=QtyToReceiveBase;
                Editable=FALSE }

    { 35  ;2   ;Field     ;
                CaptionML=[ENU=Qty. Received (Base);
                           ESM=Cdad. recibida (base);
                           FRC=Quantit‚ re‡ue (base);
                           ENC=Qty. Received (Base)];
                ToolTipML=[ENU=Specifies how many units of the item on the documents line for this item charge assignment have been posted as received.;
                           ESM=Especifica el n£mero de unidades del producto en la l¡nea de documentos de esta asignaci¢n de cargo de producto que se han registrado como recibidas.;
                           FRC=Sp‚cifie le nombre d'unit‚s de l'article sur la ligne des documents pour cette affectation de frais annexes qui ont ‚t‚ report‚es comme re‡ues.;
                           ENC=Specifies how many units of the item on the documents line for this item charge assignment have been posted as received.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=QtyReceivedBase;
                Editable=FALSE }

    { 37  ;2   ;Field     ;
                CaptionML=[ENU=Qty. to Ship (Base);
                           ESM=Cdad. a enviar (base);
                           FRC=Quantit‚ … livrer (base);
                           ENC=Qty. to Ship (Base)];
                ToolTipML=[ENU=Specifies how many units of the item on the documents line for this item charge assignment have not yet been posted as shipped.;
                           ESM=Especifica el n£mero de unidades del producto en la l¡nea de documentos de esta asignaci¢n de cargo de producto que todav¡a no se han registrado como enviadas.;
                           FRC=Sp‚cifie le nombre d'unit‚s de l'article sur la ligne des documents pour cette affectation de frais annexes qui n'ont pas encore ‚t‚ report‚es comme livr‚es.;
                           ENC=Specifies how many units of the item on the documents line for this item charge assignment have not yet been posted as shipped.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=QtyToShipBase;
                Editable=FALSE }

    { 39  ;2   ;Field     ;
                CaptionML=[ENU=Qty. Shipped (Base);
                           ESM=Cdad. enviada (base);
                           FRC=Quantit‚ livr‚e (base);
                           ENC=Qty. Shipped (Base)];
                ToolTipML=[ENU=Specifies how many units of the item on the documents line for this item charge assignment have been posted as shipped.;
                           ESM=Especifica el n£mero de unidades del producto en la l¡nea de documentos de esta asignaci¢n de cargo de producto que se han registrado como enviadas.;
                           FRC=Sp‚cifie le nombre d'unit‚s de l'article sur la ligne des documents pour cette affectation de frais annexes qui ont ‚t‚ report‚es comme livr‚es.;
                           ENC=Specifies how many units of the item on the documents line for this item charge assignment have been posted as shipped.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=QtyShippedBase;
                Editable=FALSE }

    { 22  ;1   ;Group      }

    { 1900669001;2;Group  ;
                GroupType=FixedLayout }

    { 1901652601;3;Group  ;
                CaptionML=[ENU=Assignable;
                           ESM=Asignable;
                           FRC=Affectable;
                           ENC=Assignable] }

    { 23  ;4   ;Field     ;
                CaptionML=[ENU=Total (Qty.);
                           ESM=Total (cdad.);
                           FRC=Total (qt‚);
                           ENC=Total (Qty.)];
                ToolTipML=[ENU=Specifies the total quantity of the item charge that you can assign to the related document line.;
                           ESM=Especifica la cantidad total del cargo de producto que se puede asignar a la l¡nea de documentos relacionada.;
                           FRC=Sp‚cifie la quantit‚ totale des frais annexes que vous pouvez attribuer … la ligne document associ‚e.;
                           ENC=Specifies the total quantity of the item charge that you can assign to the related document line.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                SourceExpr=AssignableQty;
                Editable=FALSE }

    { 30  ;4   ;Field     ;
                CaptionML=[ENU=Total (Amount);
                           ESM=Total (Importe);
                           FRC=Total (montant);
                           ENC=Total (Amount)];
                ToolTipML=[ENU=Specifies the total value of the item charge that you can assign to the related document line.;
                           ESM=Especifica el valor total del cargo de producto que se puede asignar a la l¡nea de documentos relacionada.;
                           FRC=Sp‚cifie la valeur totale des frais annexes que vous pouvez attribuer … la ligne document associ‚e.;
                           ENC=Specifies the total value of the item charge that you can assign to the related document line.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                SourceExpr=AssgntAmount;
                Editable=FALSE }

    { 1900545401;3;Group  ;
                CaptionML=[ENU=To Assign;
                           ESM=A asignar;
                           FRC=A affecter;
                           ENC=To Assign] }

    { 25  ;4   ;Field     ;
                CaptionML=[ENU=Qty. to Assign;
                           ESM=Cdad. a asignar;
                           FRC=Qt‚ … affecter;
                           ENC=Qty. to Assign];
                ToolTipML=[ENU=Specifies the total quantity of the item charge that you can assign to the related document line.;
                           ESM=Especifica la cantidad total del cargo de producto que se puede asignar a la l¡nea de documentos relacionada.;
                           FRC=Sp‚cifie la quantit‚ totale des frais annexes que vous pouvez attribuer … la ligne document associ‚e.;
                           ENC=Specifies the total quantity of the item charge that you can assign to the related document line.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                SourceExpr=TotalQtyToAssign;
                Editable=FALSE }

    { 31  ;4   ;Field     ;
                CaptionML=[ENU=Amount to Assign;
                           ESM=Importe a asignar;
                           FRC=Montant … affecter;
                           ENC=Amount to Assign];
                ToolTipML=[ENU=Specifies the total value of the item charge that you can assign to the related document line.;
                           ESM=Especifica el valor total del cargo de producto que se puede asignar a la l¡nea de documentos relacionada.;
                           FRC=Sp‚cifie la valeur totale des frais annexes que vous pouvez attribuer … la ligne document associ‚e.;
                           ENC=Specifies the total value of the item charge that you can assign to the related document line.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                SourceExpr=TotalAmountToAssign;
                Editable=FALSE }

    { 1900295801;3;Group  ;
                CaptionML=[ENU=Rem. to Assign;
                           ESM=Pend. a asignar;
                           FRC=Restant … affecter;
                           ENC=Rem. to Assign] }

    { 27  ;4   ;Field     ;
                CaptionML=[ENU=Rem. Qty. to Assign;
                           ESM=Cdad. pend. a asignar;
                           FRC=Qt‚ … affecter restante;
                           ENC=Rem. Qty. to Assign];
                ToolTipML=[ENU=Specifies the quantity of the item charge that has not yet been assigned.;
                           ESM=Especifica la cantidad del cargo de producto que todav¡a no se ha asignado.;
                           FRC=Indique la quantit‚ des frais annexes qui n'a pas encore ‚t‚ affect‚e.;
                           ENC=Specifies the quantity of the item charge that has not yet been assigned.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                SourceExpr=RemQtyToAssign;
                Editable=FALSE;
                Style=Unfavorable;
                StyleExpr=RemQtyToAssign <> 0 }

    { 32  ;4   ;Field     ;
                Name=RemAmountToAssign;
                CaptionML=[ENU=Rem. Amount to Assign;
                           ESM=Imp. pend. a asignar;
                           FRC=Montant … affecter restant;
                           ENC=Rem. Amount to Assign];
                ToolTipML=[ENU=Specifies the value of the quantity of the item charge that has not yet been assigned.;
                           ESM=Especifica el valor de la cantidad del cargo de producto que todav¡a no se ha asignado.;
                           FRC=Sp‚cifie la valeur de la quantit‚ des frais annexes qui n'a pas encore ‚t‚ affect‚e.;
                           ENC=Specifies the value of the quantity of the item charge that has not yet been assigned.];
                ApplicationArea=#ItemCharges;
                DecimalPlaces=0:5;
                SourceExpr=RemAmountToAssign;
                Editable=FALSE;
                Style=Unfavorable;
                StyleExpr=RemAmountToAssign <> 0 }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=The sign of %1 must be the same as the sign of %2 of the item charge.;ESM=El signo de %1 debe ser el mismo que el signo de %2 del cargo prod.;FRC=Le signe de %1 doit ˆtre le mˆme que celui de %2 des frais annexes.;ENC=The sign of %1 must be the same as the sign of %2 of the item charge.';
      PurchLine@1001 : Record 39;
      PurchLine2@1002 : Record 39;
      PurchRcptLine@1003 : Record 121;
      ReturnShptLine@1004 : Record 6651;
      TransferRcptLine@1019 : Record 5747;
      SalesShptLine@1017 : Record 111;
      ReturnRcptLine@1018 : Record 6661;
      AssignableQty@1005 : Decimal;
      TotalQtyToAssign@1006 : Decimal;
      RemQtyToAssign@1007 : Decimal;
      AssgntAmount@1008 : Decimal;
      TotalAmountToAssign@1009 : Decimal;
      RemAmountToAssign@1010 : Decimal;
      QtyToReceiveBase@1011 : Decimal;
      QtyReceivedBase@1012 : Decimal;
      QtyToShipBase@1013 : Decimal;
      QtyShippedBase@1014 : Decimal;
      DataCaption@1016 : Text[250];
      Text001@1020 : TextConst '@@@="%2 = Document Type, %3 = Document No.";ENU=The remaining amount to assign is %1. It must be zero before you can post %2 %3.\ \Are you sure that you want to close the window?;ESM=El importe pendiente a asignar es %1. Debe ser cero para poder registrar %2 %3.\ \¨Est  seguro de que quiere cerrar la ventana?;FRC=Le montant ouvert … affecter est %1. Il doit ˆtre ‚gal … z‚ro avant de reporter %2 %3.\ \Voulez-vous vraiment fermer la fenˆtre?;ENC=The remaining amount to assign is %1. It must be zero before you can post %2 %3.\ \Are you sure that you want to close the window?';
      GrossWeight@1021 : Decimal;
      UnitVolume@1015 : Decimal;

    LOCAL PROCEDURE UpdateQtyAssgnt@2();
    VAR
      ItemChargeAssgntPurch@1000 : Record 5805;
    BEGIN
      PurchLine2.CALCFIELDS("Qty. to Assign","Qty. Assigned");
      AssignableQty :=
        PurchLine2."Qty. to Invoice" + PurchLine2."Quantity Invoiced" - PurchLine2."Qty. Assigned";

      ItemChargeAssgntPurch.RESET;
      ItemChargeAssgntPurch.SETCURRENTKEY("Document Type","Document No.","Document Line No.");
      ItemChargeAssgntPurch.SETRANGE("Document Type","Document Type");
      ItemChargeAssgntPurch.SETRANGE("Document No.","Document No.");
      ItemChargeAssgntPurch.SETRANGE("Document Line No.","Document Line No.");
      ItemChargeAssgntPurch.CALCSUMS("Qty. to Assign","Amount to Assign");
      TotalQtyToAssign := ItemChargeAssgntPurch."Qty. to Assign";
      TotalAmountToAssign := ItemChargeAssgntPurch."Amount to Assign";

      RemQtyToAssign := AssignableQty - TotalQtyToAssign;
      RemAmountToAssign := AssgntAmount - TotalAmountToAssign;
    END;

    LOCAL PROCEDURE UpdateQty@1();
    BEGIN
      CASE "Applies-to Doc. Type" OF
        "Applies-to Doc. Type"::Order,"Applies-to Doc. Type"::Invoice:
          BEGIN
            PurchLine.GET("Applies-to Doc. Type","Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := PurchLine."Qty. to Receive (Base)";
            QtyReceivedBase := PurchLine."Qty. Received (Base)";
            QtyToShipBase := 0;
            QtyShippedBase := 0;
            GrossWeight := PurchLine."Gross Weight";
            UnitVolume := PurchLine."Unit Volume";
          END;
        "Applies-to Doc. Type"::"Return Order","Applies-to Doc. Type"::"Credit Memo":
          BEGIN
            PurchLine.GET("Applies-to Doc. Type","Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := 0;
            QtyReceivedBase := 0;
            QtyToShipBase := PurchLine."Return Qty. to Ship (Base)";
            QtyShippedBase := PurchLine."Return Qty. Shipped (Base)";
            GrossWeight := PurchLine."Gross Weight";
            UnitVolume := PurchLine."Unit Volume";
          END;
        "Applies-to Doc. Type"::Receipt:
          BEGIN
            PurchRcptLine.GET("Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := 0;
            QtyReceivedBase := PurchRcptLine."Quantity (Base)";
            QtyToShipBase := 0;
            QtyShippedBase := 0;
            GrossWeight := PurchRcptLine."Gross Weight";
            UnitVolume := PurchRcptLine."Unit Volume";
          END;
        "Applies-to Doc. Type"::"Return Shipment":
          BEGIN
            ReturnShptLine.GET("Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := 0;
            QtyReceivedBase := 0;
            QtyToShipBase := 0;
            QtyShippedBase := ReturnShptLine."Quantity (Base)";
            GrossWeight := ReturnShptLine."Gross Weight";
            UnitVolume := ReturnShptLine."Unit Volume";
          END;
        "Applies-to Doc. Type"::"Transfer Receipt":
          BEGIN
            TransferRcptLine.GET("Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := 0;
            QtyReceivedBase := TransferRcptLine.Quantity;
            QtyToShipBase := 0;
            QtyShippedBase := 0;
            GrossWeight := TransferRcptLine."Gross Weight";
            UnitVolume := TransferRcptLine."Unit Volume";
          END;
        "Applies-to Doc. Type"::"Sales Shipment":
          BEGIN
            SalesShptLine.GET("Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := 0;
            QtyReceivedBase := 0;
            QtyToShipBase := 0;
            QtyShippedBase := SalesShptLine."Quantity (Base)";
            GrossWeight := SalesShptLine."Gross Weight";
            UnitVolume := SalesShptLine."Unit Volume";
          END;
        "Applies-to Doc. Type"::"Return Receipt":
          BEGIN
            ReturnRcptLine.GET("Applies-to Doc. No.","Applies-to Doc. Line No.");
            QtyToReceiveBase := 0;
            QtyReceivedBase := ReturnRcptLine."Quantity (Base)";
            QtyToShipBase := 0;
            QtyShippedBase := 0;
            GrossWeight := ReturnRcptLine."Gross Weight";
            UnitVolume := ReturnRcptLine."Unit Volume";
          END;
      END;
    END;

    [External]
    PROCEDURE Initialize@3(NewPurchLine@1000 : Record 39;NewLineAmt@1001 : Decimal);
    BEGIN
      PurchLine2 := NewPurchLine;
      DataCaption := PurchLine2."No." + ' ' + PurchLine2.Description;
      AssgntAmount := NewLineAmt;
    END;

    LOCAL PROCEDURE QtytoAssignOnAfterValidate@19000177();
    BEGIN
      CurrPage.UPDATE(FALSE);
      UpdateQtyAssgnt;
    END;

    BEGIN
    END.
  }
}

