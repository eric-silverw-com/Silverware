OBJECT Page 6520 Item Tracing
{
  OBJECT-PROPERTIES
  {
    Date=09/19/18;
    Time=12:00:00 PM;
    Version List=NAVW113.00;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Item Tracing;
               ESM=Seguimiento productos;
               FRC=Rep‚rage d'article;
               ENC=Item Tracing];
    ApplicationArea=#ItemTracking;
    InsertAllowed=No;
    DeleteAllowed=No;
    ModifyAllowed=No;
    SourceTable=Table6520;
    PageType=Worksheet;
    UsageCategory=Tasks;
    SourceTableTemporary=Yes;
    OnInit=BEGIN
             NavigateEnable := TRUE;
             PrintEnable := TRUE;
             FunctionsEnable := TRUE;
           END;

    OnOpenPage=BEGIN
                 InitButtons;
                 TraceMethod := TraceMethod::"Usage->Origin";
                 ShowComponents := ShowComponents::"Item-tracked Only";
               END;

    OnAfterGetRecord=BEGIN
                       DescriptionIndent := 0;
                       ItemTracingMgt.SetExpansionStatus(Rec,TempTrackEntry,Rec,ActualExpansionStatus);
                       DescriptionOnFormat;
                     END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 34      ;1   ;ActionGroup;
                      Name=Line;
                      CaptionML=[ENU=&Line;
                                 ESM=&L¡nea;
                                 FRC=&Ligne;
                                 ENC=&Line];
                      Image=Line }
      { 60      ;2   ;Action    ;
                      Name=ShowDocument;
                      ShortCutKey=Shift+F7;
                      CaptionML=[ENU=Show Document;
                                 ESM=Muestra documento;
                                 FRC=Afficher le document;
                                 ENC=Show Document];
                      ToolTipML=[ENU=Open the document that the selected line exists on.;
                                 ESM=Permite abrir el documento en el que est  la l¡nea seleccionada.;
                                 FRC=Ouvrir le document sur lequel la ligne s‚lectionn‚e existe.;
                                 ENC=Open the document that the selected line exists on.];
                      ApplicationArea=#ItemTracking;
                      Image=View;
                      OnAction=BEGIN
                                 ItemTracingMgt.ShowDocument("Record Identifier");
                               END;
                                }
      { 10      ;1   ;ActionGroup;
                      Name=Item;
                      CaptionML=[ENU=&Item;
                                 ESM=&Producto;
                                 FRC=&Article;
                                 ENC=&Item];
                      Image=Item }
      { 17      ;2   ;Action    ;
                      Name=Card;
                      ShortCutKey=Shift+F7;
                      CaptionML=[ENU=Card;
                                 ESM=Ficha;
                                 FRC=Fiche;
                                 ENC=Card];
                      ToolTipML=[ENU=View or change detailed information about the record on the document or journal line.;
                                 ESM=Permite ver o cambiar la informaci¢n detallada sobre el registro en el documento o en la l¡nea del diario.;
                                 FRC=Affichez ou modifiez les informations d‚taill‚es sur l'enregistrement sur la ligne document ou journal.;
                                 ENC=View or change detailed information about the record on the document or journal line.];
                      ApplicationArea=#ItemTracking;
                      RunObject=Page 30;
                      RunPageLink=No.=FIELD(Item No.);
                      Image=EditLines }
      { 19      ;2   ;Action    ;
                      Name=LedgerEntries;
                      ShortCutKey=Ctrl+F7;
                      CaptionML=[ENU=Ledger E&ntries;
                                 ESM=&Movimientos;
                                 FRC=&critures comptables;
                                 ENC=Ledger E&ntries];
                      ToolTipML=[ENU=View the history of transactions that have been posted for the selected record.;
                                 ESM=Permite ver el historial de transacciones que se han registrado para el registro seleccionado.;
                                 FRC=Affichez l'historique des transactions qui ont ‚t‚ report‚es pour l'enregistrement s‚lectionn‚.;
                                 ENC=View the history of transactions that have been posted for the selected record.];
                      ApplicationArea=#ItemTracking;
                      RunObject=Page 38;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(Item No.);
                      Promoted=No;
                      Image=CustomerLedger;
                      PromotedCategory=Process }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 36      ;1   ;ActionGroup;
                      Name=Functions;
                      CaptionML=[ENU=F&unctions;
                                 ESM=Acci&ones;
                                 FRC=F&onctions;
                                 ENC=F&unctions];
                      Image=Action }
      { 59      ;2   ;Action    ;
                      Name=TraceOppositeFromLine;
                      CaptionML=[ENU=&Trace Opposite - from Line;
                                 ESM=&Realizar seguimiento opuestos - desde l¡nea;
                                 FRC=Re&p‚rer inverse - depuis la ligne;
                                 ENC=&Trace Opposite - from Line];
                      ToolTipML=[ENU=Repeat the previous trace, but going the opposite direction.;
                                 ESM=Repetir el seguimiento anterior, pero en sentido contrario.;
                                 FRC=R‚p‚ter le suivi pr‚c‚dent, mais dans le sens oppos‚.;
                                 ENC=Repeat the previous trace, but going the opposite direction.];
                      ApplicationArea=#ItemTracking;
                      Promoted=Yes;
                      Enabled=FunctionsEnable;
                      Image=TraceOppositeLine;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 IF TraceMethod = TraceMethod::"Origin->Usage" THEN
                                   TraceMethod := TraceMethod::"Usage->Origin"
                                 ELSE
                                   TraceMethod := TraceMethod::"Origin->Usage";
                                 OppositeTraceFromLine;
                               END;
                                }
      { 26      ;2   ;Action    ;
                      Name=SetFiltersWithLineValues;
                      CaptionML=[ENU=Set &Filters with Line Values;
                                 ESM=Establecer &filtros con valores de l¡nea;
                                 FRC=D‚finir les &filtres avec valeurs de ligne;
                                 ENC=Set &Filters with Line Values];
                      ToolTipML=[ENU=Insert the values of the selected line in the respective filter fields on the header and executes a new trace. This function is useful, for example, when the origin of the defective item is found and that particular trace line must form the basis of additional tracking with the same trace method.;
                                 ESM=Inserta los valores de la l¡nea seleccionada en los campos de filtro correspondientes del encabezado y ejecuta un seguimiento de nuevo. Esta funci¢n es £til, por ejemplo, cuando se encuentra el origen del producto defectuoso y esa l¡nea de seguimiento espec¡fico debe formar la base del seguimiento adicional con el mismo m‚todo de seguimiento.;
                                 FRC=Ins‚rer les valeurs de la ligne s‚lectionn‚e dans les champs du filtre correspondant dans l'en-tˆte et ex‚cuter un nouveau suivi. Cette fonction est utile, par exemple, lorsque l'origine de l'article d‚fectueux a ‚t‚ trouv‚e et que cette ligne de suivi particuliŠre doit former la base de suivi suppl‚mentaire avec la mˆme m‚thode de suivi.;
                                 ENC=Insert the values of the selected line in the respective filter fields on the header and executes a new trace. This function is useful, for example, when the origin of the defective item is found and that particular trace line must form the basis of additional tracking with the same trace method.];
                      ApplicationArea=#ItemTracking;
                      Enabled=FunctionsEnable;
                      Image=FilterLines;
                      OnAction=BEGIN
                                 ItemTracingMgt.InitSearchParm(Rec,SerialNoFilter,LotNoFilter,ItemNoFilter,VariantFilter);
                               END;
                                }
      { 7       ;2   ;Action    ;
                      Name=Go to Already-Traced History;
                      CaptionML=[ENU=Go to Already-Traced History;
                                 ESM=Ir a historial con seguimiento existente;
                                 FRC=Acc‚der … l'historique D‚j… trac‚;
                                 ENC=Go to Already-Traced History];
                      ToolTipML=[ENU=View the item tracing history.;
                                 ESM=Ver el historial de seguimiento de productos.;
                                 FRC=Afficher l'historique tra‡abilit‚ de l'article.;
                                 ENC=View the item tracing history.];
                      ApplicationArea=#ItemTracking;
                      Enabled=FunctionsEnable;
                      Image=MoveUp;
                      OnAction=BEGIN
                                 SetFocus("Item Ledger Entry No.");
                               END;
                                }
      { 37      ;2   ;Action    ;
                      Name=NextTraceResult;
                      CaptionML=[ENU=Next Trace Result;
                                 ESM=Resultado seguimiento siguiente;
                                 FRC=R‚sultat de rep‚rage suivant;
                                 ENC=Next Trace Result];
                      ToolTipML=[ENU="View the next item transaction in the tracing direction. ";
                                 ESM="Permite ver la transacci¢n del art¡culo siguiente en la direcci¢n de seg. ";
                                 FRC="Afficher la transaction article suivante dans le sens de tra‡age. ";
                                 ENC="View the next item transaction in the tracing direction. "];
                      ApplicationArea=#ItemTracking;
                      Image=NextRecord;
                      OnAction=BEGIN
                                 RecallHistory(1);
                               END;
                                }
      { 38      ;2   ;Action    ;
                      Name=PreviousTraceResult;
                      CaptionML=[ENU=Previous Trace Result;
                                 ESM=Resultado seguimiento anterior;
                                 FRC=R‚sultat de rep‚rage pr‚c‚dent;
                                 ENC=Previous Trace Result];
                      ToolTipML=[ENU=View the previous item transaction in the tracing direction.;
                                 ESM=Permite ver la transacci¢n del art¡culo anterior en la direcci¢n de seg.;
                                 FRC=Afficher la transaction article pr‚c‚dente dans le sens de tra‡age.;
                                 ENC=View the previous item transaction in the tracing direction.];
                      ApplicationArea=#ItemTracking;
                      Image=PreviousRecord;
                      OnAction=BEGIN
                                 RecallHistory(-1);
                               END;
                                }
      { 16      ;1   ;Action    ;
                      Name=Print;
                      Ellipsis=Yes;
                      CaptionML=[ENU=&Print;
                                 ESM=&Imprimir;
                                 FRC=&Imprimer;
                                 ENC=&Print];
                      ToolTipML=[ENU=Prepare to print the document. A report request window for the document opens where you can specify what to include on the print-out.;
                                 ESM=Preparar el documento para imprimirlo. Se abre una ventana de solicitud de informe para el documento, donde puede especificar qu‚ incluir en la impresi¢n.;
                                 FRC=Pr‚parez-vous … imprimer le document. Une fenˆtre de demande de rapport pour le document s'ouvre et vous permet d'indiquer les ‚l‚ments … imprimer.;
                                 ENC=Prepare to print the document. A report request window for the document opens where you can specify what to include on the print-out.];
                      ApplicationArea=#ItemTracking;
                      Promoted=Yes;
                      Enabled=PrintEnable;
                      Image=Print;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 xItemTracingBuffer@1002 : Record 6520;
                                 PrintTracking@1000 : Report 6520;
                               BEGIN
                                 CLEAR(PrintTracking);
                                 xItemTracingBuffer.COPY(Rec);
                                 PrintTracking.TransferEntries(Rec);
                                 COPY(xItemTracingBuffer);
                                 PrintTracking.RUN;
                               END;
                                }
      { 11      ;1   ;Action    ;
                      Name=Navigate;
                      CaptionML=[ENU=&Navigate;
                                 ESM=&Navegar;
                                 FRC=&Naviguer;
                                 ENC=&Navigate];
                      ToolTipML=[ENU=Find all entries and documents that exist for the document number and posting date on the selected entry or document.;
                                 ESM=Buscar todos los movimientos y los documentos que existen para el n£mero de documento y la fecha de registro que constan en el movimiento o documento seleccionados.;
                                 FRC=Recherchez toutes les ‚critures et tous les documents qui existent pour le num‚ro de document et la date de report sur l'‚criture ou le document s‚lectionn‚(e).;
                                 ENC=Find all entries and documents that exist for the document number and posting date on the selected entry or document.];
                      ApplicationArea=#ItemTracking;
                      Promoted=Yes;
                      Enabled=NavigateEnable;
                      Image=Navigate;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 Navigate@1000 : Page 344;
                               BEGIN
                                 Navigate.SetTracking("Serial No.","Lot No.");
                                 Navigate.RUN;
                               END;
                                }
      { 20      ;1   ;Action    ;
                      Name=Trace;
                      CaptionML=[ENU=&Trace;
                                 ESM=&Realizar seguimiento;
                                 FRC=R&ep‚rer;
                                 ENC=&Trace];
                      ToolTipML=[ENU=Trace where a lot or serial number assigned to the item was used, for example, to find which lot a defective component came from or to find all the customers that have received items containing the defective component.;
                                 ESM=Realizar un seguimiento del uso de un lote o un n£mero de serie asignado al producto, por ejemplo, para buscar de qu‚ lote proced¡a un componente defectuoso o para buscar todos los clientes que han recibido art¡culos con el componente defectuoso.;
                                 FRC=Effectuez le suivi de l'utilisation d'un num‚ro de lot ou de s‚rie affect‚ … l'article, par exemple, pour rechercher le lot dont provient une composante d‚fectueuse ou pour rechercher tous les clients qui ont re‡u des articles contenant la composante d‚fectueuse.;
                                 ENC=Trace where a lot or serial number assigned to the item was used, for example, to find which lot a defective component came from or to find all the customers that have received items containing the defective component.];
                      ApplicationArea=#ItemTracking;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Trace;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 FindRecords;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1000000001;1;Group  ;
                CaptionML=[ENU=General;
                           ESM=General;
                           FRC=G‚n‚ral;
                           ENC=General] }

    { 18  ;2   ;Field     ;
                CaptionML=[ENU=Serial No. Filter;
                           ESM=Filtro n§ serie;
                           FRC=Filtre nø de s‚rie;
                           ENC=Serial No. Filter];
                ToolTipML=[ENU=Specifies the serial number or a filter on the serial numbers that you would like to trace.;
                           ESM=Especifica el n£mero de serie o un filtro en los n£meros de serie que desea rastrear.;
                           FRC=Sp‚cifie le num‚ro de s‚rie ou un filtre sur les num‚ros de s‚rie … suivre.;
                           ENC=Specifies the serial number or a filter on the serial numbers that you would like to trace.];
                ApplicationArea=#ItemTracking;
                SourceExpr=SerialNoFilter;
                OnLookup=VAR
                           SerialNoInfo@1003 : Record 6504;
                           SerialNoList@1002 : Page 6509;
                         BEGIN
                           SerialNoInfo.RESET;

                           CLEAR(SerialNoList);
                           SerialNoList.SETTABLEVIEW(SerialNoInfo);
                           IF SerialNoList.RUNMODAL = ACTION::LookupOK THEN
                             SerialNoFilter := SerialNoList.GetSelectionFilter;
                         END;
                          }

    { 13  ;2   ;Field     ;
                CaptionML=[ENU=Lot No. Filter;
                           ESM=Filtro n§ lote;
                           FRC=Filtre nø lot;
                           ENC=Lot No. Filter];
                ToolTipML=[ENU=Specifies the lot number or a filter on the lot numbers that you would like to trace.;
                           ESM=Especifica el n£mero de lote o un filtro en los n£meros de lote que desea rastrear.;
                           FRC=Sp‚cifie le num‚ro de lot ou un filtre sur les num‚ros de lot … suivre.;
                           ENC=Specifies the lot number or a filter on the lot numbers that you would like to trace.];
                ApplicationArea=#ItemTracking;
                SourceExpr=LotNoFilter;
                OnLookup=VAR
                           LotNoInfo@1002 : Record 6505;
                           LotNoList@1003 : Page 6508;
                         BEGIN
                           LotNoInfo.RESET;

                           CLEAR(LotNoList);
                           LotNoList.SETTABLEVIEW(LotNoInfo);
                           IF LotNoList.RUNMODAL = ACTION::LookupOK THEN
                             LotNoFilter := LotNoList.GetSelectionFilter;
                         END;
                          }

    { 1000000013;2;Field  ;
                CaptionML=[ENU=Item Filter;
                           ESM=Filtro producto;
                           FRC=Filtre article;
                           ENC=Item Filter];
                ToolTipML=[ENU=Specifies the item number or a filter on the item numbers that you would like to trace.;
                           ESM=Especifica el n£mero de producto o filtro en los n£meros de lote que desea rastrear.;
                           FRC=Sp‚cifie le num‚ro d'article ou un filtre pour les num‚ros d'article que vous voulez suivre.;
                           ENC=Specifies the item number or a filter on the item numbers that you would like to trace.];
                ApplicationArea=#ItemTracking;
                SourceExpr=ItemNoFilter;
                OnValidate=BEGIN
                             IF ItemNoFilter = '' THEN
                               VariantFilter := '';
                           END;

                OnLookup=VAR
                           Item@1002 : Record 27;
                           ItemList@1003 : Page 31;
                         BEGIN
                           Item.RESET;

                           CLEAR(ItemList);
                           ItemList.SETTABLEVIEW(Item);
                           ItemList.LOOKUPMODE(TRUE);
                           IF ItemList.RUNMODAL = ACTION::LookupOK THEN
                             ItemNoFilter := ItemList.GetSelectionFilter;
                         END;
                          }

    { 4   ;2   ;Field     ;
                CaptionML=[ENU=Variant Filter;
                           ESM=Filtro variante;
                           FRC=Filtre variante;
                           ENC=Variant Filter];
                ToolTipML=[ENU=Specifies the variant code or a filter on the variant codes that you would like to trace.;
                           ESM=Especifica el c¢digo de variante o un filtro en los c¢digos de variante que desea rastrear.;
                           FRC=Sp‚cifie le code de variante ou un filtre sur les codes de variante que vous souhaitez suivre.;
                           ENC=Specifies the variant code or a filter on the variant codes that you would like to trace.];
                ApplicationArea=#Planning;
                SourceExpr=VariantFilter;
                OnValidate=BEGIN
                             IF ItemNoFilter = '' THEN
                               ERROR(Text001);
                           END;

                OnLookup=VAR
                           ItemVariant@1003 : Record 5401;
                           ItemVariants@1002 : Page 5401;
                         BEGIN
                           IF ItemNoFilter = '' THEN
                             ERROR(Text001);

                           ItemVariant.RESET;

                           CLEAR(ItemVariants);
                           ItemVariant.SETFILTER("Item No.",ItemNoFilter);
                           ItemVariants.SETTABLEVIEW(ItemVariant);
                           ItemVariants.LOOKUPMODE(TRUE);
                           IF ItemVariants.RUNMODAL = ACTION::LookupOK THEN BEGIN
                             ItemVariants.GETRECORD(ItemVariant);
                             VariantFilter := ItemVariant.Code;
                           END;
                         END;
                          }

    { 25  ;2   ;Field     ;
                CaptionML=[ENU=Show Components;
                           ESM=Mostrar componentes;
                           FRC=Afficher les composants;
                           ENC=Show Components];
                ToolTipML=[ENU=Specifies if you would like to see the components of the item that you are tracing.;
                           ESM=Especifica si desea o no visualizar los componentes del producto para el que est  realizando el seguimiento.;
                           FRC=Sp‚cifie si vous souhaitez afficher les composantes de l'article que vous suivez.;
                           ENC=Specifies if you would like to see the components of the item that you are tracing.];
                OptionCaptionML=[ENU=No,Item-tracked Only,All;
                                 ESM=No,S¢lo producto seguido,Todos;
                                 FRC=Non,Article suivi uniquement,Tous;
                                 ENC=No,Item-tracked Only,All];
                ApplicationArea=#ItemTracking;
                SourceExpr=ShowComponents }

    { 21  ;2   ;Field     ;
                CaptionML=[ENU=Trace Method;
                           ESM=M‚todo seguimiento;
                           FRC=M‚thode de tra‡abilit‚;
                           ENC=Trace Method];
                ToolTipML=[ENU=Specifies posted serial/lot numbers that can be traced either forward or backward in a supply chain.;
                           ESM=Especifica n£meros de serie o lote registrados que se pueden seguir, ya sea hacia adelante o hacia atr s, en una cadena de suministro.;
                           FRC=Sp‚cifie les num‚ros de s‚rie/lot report‚s dont le suivi peut ˆtre effectu‚ en aval ou en amont de la chaŒne d'approvisionnement.;
                           ENC=Specifies posted serial/lot numbers that can be traced either forward or backward in a supply chain.];
                OptionCaptionML=[ENU=Origin -> Usage,Usage -> Origin;
                                 ESM=Origen -> Uso,Uso -> Origen;
                                 FRC=Origine -> Utilisation,Utilisation -> Origine;
                                 ENC=Origin -> Usage,Usage -> Origin];
                ApplicationArea=#ItemTracking;
                SourceExpr=TraceMethod }

    { 35  ;1   ;Field     ;
                ToolTipML=[ENU=Specifies the text that is used to trace the item.;
                           ESM=Especifica el texto que se utiliza para hacer el seguimiento del producto.;
                           FRC=Sp‚cifie le texte utilis‚ pour effectuer le suivi de l'article.;
                           ENC=Specifies the text that is used to trace the item.];
                ApplicationArea=#ItemTracking;
                CaptionClass=FORMAT(TraceText);
                Editable=FALSE }

    { 1   ;1   ;Group     ;
                IndentationColumnName=DescriptionIndent;
                IndentationControls=Description;
                ShowAsTree=Yes;
                GroupType=Repeater }

    { 1000000015;2;Field  ;
                ToolTipML=[ENU=Specifies a description of the traced item.;
                           ESM=Especifica una descripci¢n del producto con seguimiento.;
                           FRC=Sp‚cifie une description de l'article suivi.;
                           ENC=Specifies a description of the traced item.];
                ApplicationArea=#ItemTracking;
                SourceExpr=Description }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of the traced entry.;
                           ESM=Especifica el tipo del movimiento con seguimiento.;
                           FRC=Sp‚cifie le type de l'‚criture suivie.;
                           ENC=Specifies the type of the traced entry.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Entry Type";
                Visible=FALSE }

    { 1000000034;2;Field  ;
                ToolTipML=[ENU=Specifies the serial number to be traced.;
                           ESM=Especifica el n£mero de serie para el que se realizar  el seguimiento.;
                           FRC=Sp‚cifie le num‚ro de s‚rie qui doit faire l'objet d'un suivi.;
                           ENC=Specifies the serial number to be traced.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Serial No.";
                Editable=FALSE;
                Style=Strong }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the traced lot number.;
                           ESM=Especifica el n£mero de lote con seguimiento.;
                           FRC=Sp‚cifie le num‚ro de lot suivi.;
                           ENC=Specifies the traced lot number.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Lot No.";
                Editable=FALSE;
                Style=Strong }

    { 1000000030;2;Field  ;
                ToolTipML=[ENU=Specifies the number of the traced item.;
                           ESM=Especifica el n£mero del producto que se est  siguiendo.;
                           FRC=Sp‚cifie le num‚ro de l'article suivi.;
                           ENC=Specifies the number of the traced item.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Item No.";
                Editable=FALSE;
                Style=Strong }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the item.;
                           ESM=Especifica una descripci¢n del producto.;
                           FRC=Sp‚cifie une description de l'article.;
                           ENC=Specifies a description of the item.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Item Description";
                Editable=FALSE }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESM=Especifica la variante del producto que figura en la l¡nea.;
                           FRC=Indique la variante de l'article sur la ligne.;
                           ENC=Specifies the variant of the item on the line.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE }

    { 1000000032;2;Field  ;
                ToolTipML=[ENU=Specifies the number of the traced document.;
                           ESM=Especifica el n£mero del documento con seguimiento.;
                           FRC=Sp‚cifie le num‚ro du document suivi.;
                           ENC=Specifies the number of the traced document.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Document No.";
                Visible=FALSE }

    { 1000000043;2;Field  ;
                ToolTipML=[ENU=Specifies the date when the traced item was posted.;
                           ESM=Especifica la fecha en la que se registr¢ el producto con seguimiento.;
                           FRC=Sp‚cifie la date de validation de l'article suivi.;
                           ENC=Specifies the date when the traced item was posted.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Posting Date";
                Visible=FALSE }

    { 1000000017;2;Field  ;
                ToolTipML=[ENU=Specifies the type of record, such as Sales Header, that the item is traced from.;
                           ESM=Especifica el tipo de registro, como la cabecera de venta, desde el que se realiza el seguimiento del producto.;
                           FRC=Sp‚cifie le type d'enregistrement, par exemple l'En-tˆte vente, depuis lequel l'article est suivi.;
                           ENC=Specifies the type of record, such as Sales Header, that the item is traced from.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Source Type";
                Visible=FALSE }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the source document that the entry originates from.;
                           ESM=Especifica el n£mero del documento de origen del que procede el movimiento.;
                           FRC=Sp‚cifie le num‚ro du document source dont est issue l'‚criture.;
                           ENC=Specifies the number of the source document that the entry originates from.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Source No.";
                Visible=FALSE;
                Editable=FALSE }

    { 1000000003;2;Field  ;
                ToolTipML=[ENU=Specifies the name of the record that the item is traced from.;
                           ESM=Especifica el nombre del registro desde el que se realiza el seguimiento del producto.;
                           FRC=Sp‚cifie le nom de l'enregistrement depuis lequel l'article est suivi.;
                           ENC=Specifies the name of the record that the item is traced from.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Source Name";
                Visible=FALSE;
                Editable=FALSE }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the location of the traced item.;
                           ESM=Especifica la ubicaci¢n del producto con seguimiento.;
                           FRC=Sp‚cifie l'emplacement de l'article suivi.;
                           ENC=Specifies the location of the traced item.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Location Code";
                Editable=FALSE }

    { 1000000021;2;Field  ;
                ToolTipML=[ENU=Specifies the quantity of the traced item in the line.;
                           ESM=Especifica la cantidad del producto con seguimiento que figura en la l¡nea.;
                           FRC=Sp‚cifie la quantit‚ de l'article suivi dans la ligne.;
                           ENC=Specifies the quantity of the traced item in the line.];
                ApplicationArea=#ItemTracking;
                SourceExpr=Quantity;
                OnDrillDown=VAR
                              ItemLedgerEntry@1000000000 : Record 32;
                            BEGIN
                              ItemLedgerEntry.RESET;
                              ItemLedgerEntry.SETRANGE("Entry No.","Item Ledger Entry No.");
                              PAGE.RUNMODAL(0,ItemLedgerEntry);
                            END;
                             }

    { 1000000019;2;Field  ;
                ToolTipML=[ENU=Specifies the quantity in the Quantity field that remains to be processed.;
                           ESM=Especifica la cantidad del campo Cantidad que queda por procesar.;
                           FRC=Indique dans le champ Quantit‚ la quantit‚ restant … traiter.;
                           ENC=Specifies the quantity in the Quantity field that remains to be processed.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Remaining Quantity" }

    { 1000000023;2;Field  ;
                Lookup=Yes;
                ToolTipML=[ENU=Specifies the user who created the traced record.;
                           ESM=Especifica el usuario que cre¢ el registro con seguimiento.;
                           FRC=Sp‚cifie l'utilisateur ayant cr‚‚ l'enregistrement suivi.;
                           ENC=Specifies the user who created the traced record.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Created by";
                Visible=FALSE }

    { 1000000025;2;Field  ;
                ToolTipML=[ENU=Specifies the date when the traced record was created.;
                           ESM=Especifica la fecha en la que se cre¢ el registro que se est  siguiendo.;
                           FRC=Sp‚cifie la date de cr‚ation de l'enregistrement suivi.;
                           ENC=Specifies the date when the traced record was created.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Created on";
                Visible=FALSE }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if additional transaction history under this line has already been traced by other lines above it.;
                           ESM=Especifica si ya se realiz¢ el seguimiento del historial de transacciones adicionales que figura en esta l¡nea a trav‚s de otras l¡neas situadas arriba de esta.;
                           FRC=Indique si l'historique des transactions suppl‚mentaires sous cette ligne a d‚j… ‚t‚ suivi par d'autres lignes au-dessus.;
                           ENC=Specifies if additional transaction history under this line has already been traced by other lines above it.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Already Traced" }

    { 9   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the traced item ledger entry.;
                           ESM=Especifica el n£mero del movimiento contable del producto que se est  siguiendo.;
                           FRC=Sp‚cifie le num‚ro de l'‚criture du grand livre d'articles suivie.;
                           ENC=Specifies the number of the traced item ledger entry.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Item Ledger Entry No.";
                Visible=FALSE }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the parent of the traced item ledger entry.;
                           ESM=Especifica el elemento principal correspondiente al movimiento contable del producto con seguimiento.;
                           FRC=Sp‚cifie le parent de l'‚criture de l'article suivi.;
                           ENC=Specifies the parent of the traced item ledger entry.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Parent Item Ledger Entry No.";
                Visible=FALSE }

  }
  CODE
  {
    VAR
      TempTrackEntry@1000 : TEMPORARY Record 6520;
      ItemTracingMgt@1017 : Codeunit 6520;
      TraceMethod@1004 : 'Origin->Usage,Usage->Origin';
      ShowComponents@1000000002 : 'No,Item-tracked Only,All';
      ActualExpansionStatus@1009 : 'Has Children,Expanded,No Children';
      SerialNoFilter@1000000009 : Text;
      LotNoFilter@1006 : Text;
      ItemNoFilter@1000000007 : Text;
      VariantFilter@1001 : Text;
      Text001@1002 : TextConst 'ENU=Item No. Filter is required.;ESM=El filtro n§ producto es obligatorio.;FRC=Filtre nø article requis.;ENC=Item No. Filter is required.';
      TraceText@1005 : Text;
      Text002@1007 : TextConst 'ENU=Serial No.: %1, Lot No.: %2, Item: %3, Variant: %4, Trace Method: %5, Show Components: %6;ESM=N§ serie: %1, N§ lote: %2, Producto: %3, Variante: %4, M‚todo seguimiento: %5, Mostrar componentes: %6;FRC=Nø de s‚rieÿ: %1, Nø lotÿ: %2, Articleÿ: %3, Varianteÿ: %4, M‚thode de suiviÿ: %5, Afficher composantesÿ: %6;ENC=Serial No.: %1, Lot No.: %2, Item: %3, Variant: %4, Trace Method: %5, Show Components: %6';
      PreviousExists@1010 : Boolean;
      NextExists@1012 : Boolean;
      Text003@1008 : TextConst 'ENU=Filters are too large to show.;ESM=Los filtros son demasiado amplios para mostrar.;FRC=Filtres trop grands pour ˆtre affich‚s.;ENC=Filters are too large to show.';
      Text004@1003 : TextConst 'ENU=Origin->Usage,Usage->Origin;ESM=Origen->Uso,Uso->Origen;FRC=Origine->Utilisation,Utilisation->Origine;ENC=Origin->Usage,Usage->Origin';
      Text005@1013 : TextConst 'ENU=No,Item-tracked Only,All;ESM=No,S¢lo producto seguido,Todos;FRC=Non,Article suivi uniquement,Tous;ENC=No,Item-tracked Only,All';
      DescriptionIndent@19057867 : Integer INDATASET;
      FunctionsEnable@19066687 : Boolean INDATASET;
      PrintEnable@19037407 : Boolean INDATASET;
      NavigateEnable@19005834 : Boolean INDATASET;

    [External]
    PROCEDURE FindRecords@1000000001();
    BEGIN
      ItemTracingMgt.FindRecords(TempTrackEntry,Rec,
        SerialNoFilter,LotNoFilter,ItemNoFilter,VariantFilter,
        TraceMethod,ShowComponents);
      InitButtons;

      ItemTracingMgt.GetHistoryStatus(PreviousExists,NextExists);

      UpdateTraceText;

      ItemTracingMgt.ExpandAll(TempTrackEntry,Rec);
      CurrPage.UPDATE(FALSE)
    END;

    LOCAL PROCEDURE OppositeTraceFromLine@1();
    BEGIN
      ItemTracingMgt.InitSearchParm(Rec,SerialNoFilter,LotNoFilter,ItemNoFilter,VariantFilter);
      FindRecords;
    END;

    [External]
    PROCEDURE InitButtons@7();
    BEGIN
      IF NOT TempTrackEntry.FINDFIRST THEN BEGIN
        FunctionsEnable := FALSE;
        PrintEnable := FALSE;
        NavigateEnable := FALSE;
      END ELSE BEGIN
        FunctionsEnable := TRUE;
        PrintEnable := TRUE;
        NavigateEnable := TRUE;
      END;
    END;

    [External]
    PROCEDURE InitFilters@4(VAR ItemTrackingEntry@1000 : Record 6520);
    BEGIN
      SerialNoFilter := ItemTrackingEntry.GETFILTER("Serial No.");
      LotNoFilter := ItemTrackingEntry.GETFILTER("Lot No.");
      ItemNoFilter := ItemTrackingEntry.GETFILTER("Item No.");
      VariantFilter := ItemTrackingEntry.GETFILTER("Variant Code");
      TraceMethod := TraceMethod::"Usage->Origin";
      ShowComponents := ShowComponents::"Item-tracked Only";
    END;

    LOCAL PROCEDURE RecallHistory@2(Steps@1000 : Integer);
    BEGIN
      ItemTracingMgt.RecallHistory(Steps,TempTrackEntry,Rec,SerialNoFilter,
        LotNoFilter,ItemNoFilter,VariantFilter,TraceMethod,ShowComponents);
      UpdateTraceText;
      InitButtons;
      ItemTracingMgt.GetHistoryStatus(PreviousExists,NextExists);

      ItemTracingMgt.ExpandAll(TempTrackEntry,Rec);
      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE UpdateTraceText@3();
    VAR
      LengthOfText@1001 : Integer;
      Overflow@1000 : Boolean;
    BEGIN
      LengthOfText := (STRLEN(Text002 + SerialNoFilter + LotNoFilter + ItemNoFilter + VariantFilter) +
                       STRLEN(FORMAT(TraceMethod)) + STRLEN(FORMAT(ShowComponents)) - 6); // 6 = number of positions in Text002

      Overflow := LengthOfText > 512;

      IF Overflow THEN
        TraceText := Text003
      ELSE
        TraceText := STRSUBSTNO(Text002,SerialNoFilter,LotNoFilter,ItemNoFilter,VariantFilter,
            SELECTSTR(TraceMethod + 1,Text004) ,SELECTSTR(ShowComponents + 1,Text005));
    END;

    LOCAL PROCEDURE DescriptionOnFormat@19023855();
    BEGIN
      DescriptionIndent := Level;
    END;

    LOCAL PROCEDURE SetFocus@5(ItemLedgerEntryNo@1000 : Integer);
    BEGIN
      IF "Already Traced" THEN BEGIN
        TempTrackEntry.SETCURRENTKEY("Item Ledger Entry No.");
        TempTrackEntry.SETRANGE("Item Ledger Entry No.",ItemLedgerEntryNo);
        TempTrackEntry.FINDFIRST;
        CurrPage.SETRECORD(TempTrackEntry);
      END;
    END;

    BEGIN
    END.
  }
}

